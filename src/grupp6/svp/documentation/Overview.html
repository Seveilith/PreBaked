<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Overview Documentation</title>
</head>
<body>
<div>
	<h1>Overview</h1>
	<p>
		This document will present an overview of the framework and explain it's features. The
		main goal of this framework is to make it easier for you to develop a e-service prototype. 
		To begin, this framework is based on Java Servlets, using a Tomcat server and Eclipse as IDE.
		If you want to know more about servlets i recommend you to visit <a href="https://www.tutorialspoint.com/servlets/index.htm"> this tutorial</a>.
		This document will first explain where we work in relation to other technology, then move over to answer where we test, and finally
		explain the frameworks layered architecture.
	</p>
</div>
<div>
	<h2> Where do we work?</h2>
	<figure>
		<img src="img/servlet-arch.jpg" /><br />
		<i><figcaption>Figure 1: Servlets Architecture (<a href="https://www.tutorialspoint.com/servlets/servlets_overview.htm">Edited from</a>)</figcaption></i>
	</figure>
</div>
<div>
	<p>
		When we normally code Java we are inside the JVM and OS, giving us great freedom to create applications as we see fit. 
		Often the JVM and OS can be viewed as a passive partner that through our code acts. This places us on the top of the software hierarchy. 
		In this project we will experience a new division of labour (See figure 1). Where we will collaborate with a web server (HTTP Server; Tomcat)
		to handle requests from a client (web browser). Tomcat handles the communication with a client through the HTTP Protocol. While we on the other hand,
		handles the response content to the client (a.k.a. web pages).
	</p>
	<p>
		A simple example of collaboration. A user try to visit a website based on the above technology. First they enter the URL in a web browser. 
		The web browser sends a request for web site content to Tomcat. Tomcat recives the request and extracts path information (e.g. /servlets/index.htm).
		This is where Tomcat has to do an <b>important decision</b>. Does the path lead to a dynamic (servlet) or a static (e.g. *.jsp-file) page?
		The answer found through a URL pattern register, that is based on developer input through the @WebServlet annotation (e.g. see top of LoginServlet.java) and 
		/WebContent/WEB-INF/web.xml file. If the path leads to a static page (e.g. /index.jsp), it will be transformed into a html-file and returned to a client.
		In other cases where the static page is already a *.css or *.html, it will be sent back to the client (This is configured in the web.xml file).
		If the path leads to a dynamic page (e.g. /login), the correlating servlet (e.g. LoginServlet.java) will be retrieved. Tomcat will then continue
		by calling the doGet or doPost method (depending on client request). In the methods we can ask about user input, session, and cookie data
		 and respond with a site that we construct dynamically. We can get, add, edit, or delete data from a database at this stage. When we are done,
		 we return a reponse. Tomcat takes our response and sends it to the client.
	</p>
</div>
<div>
	<h2> Where do we test?</h2>
	<p>
		When we test our servlets and static pages it will be done through a web browser (see figure 1). This means that we are both testing the
		content we are making the collaboration between us and Tomcat. We can use the internal web browser in Eclipse (Just press the green arrow/play button)
		or click the small down arrow beside the button and select "Tomcat 8.5 Server at localhost", now we can visit our website through any local
		webbrowser on the URL: http://localhost:8080/WebApp-1/index.jsp. Selection of web browser will affect how the website looks. When pressing the
		play button the currently selected file's path will be the URL loaded, so be careful.
	</p>
</div>
<div>
	<h2>Framework's Layered Architecture</h2>
	<p>
		This section will present the framework's layered architecture. An web application can be divided into three layers; data, logic, and web. 
		This is a futher division of labour that makes complex problems easier to solve. The data layer handles everything that relates to storage;
		file manipulation, database access, REST communication with other servers, and so on. Implemented methods tend to be specific 
		(e.g. save transaction or load user data). The logic layer handles everything that relates to coordination, decisions, commands, 
		evaluations, and calculations. Implemented methods tend to be complex and larger (e.g. get all user transaction filtered by some value).
		The web layer handles data extraction (Input) and presentation (Output), it makes it possible for the user to use the system. Implemented
		methods tend to be complex and larger, but only focus on extraction or presentation (e.g. navigation or how to present all tasks for a user).
	</p>
	<p>
		To make the software effective and manageable some rules must be followed; (1) request can go downwards and reponses upwards, (2) 
		requests and responses can travel freely in the same layer, (3) communication with the layer below happens through a facade, and 
		(4) web communicates with logic and logic communicates with data (Web to do not know that data exist). Requests are methods calls 
		and responses are what is returned by a method. 
	</p>
	<p>
		All communication with the server (Through Tomcat) starts at the web layer. This is the only place where we collaborate with Tomcat. 
		Depending on Tomcat's <b>important decision</b> the depth of interaction can vary. In the case of static pages, the resource is retrieved
		and sent, no further interaction happens with the other layers. In the case of dynamic pages, a servlet in the web layer is called 
		(More on this below). The servlet through interactions with other classes in the web layer calls a method in web layer facade (LogicFacade.java).
		Logic facade through interaction with other classes in the same layer calls some methods in the data layer facade (DataFacade.java). 
		Information than travels up to the web layers through responses and we can build a web page that is sent to the client. 
		In the following sections the architecture will be presented from the bottom-up (data, logic, web).
	</p>
	<div>
		<h3>Data</h3>
		<p>
			The data layer is accessed through the <b>DataFacade</b> class. The objective for this layer is to mimic a real database, in this case we 
			refer to this as a ghost facade. At start of the program it needs to be populated with information that lets us simulate 
			the everyday activities of the e-service. For now it only contains users and activities (change as much as you need).
			Users and activities are stored in hash maps inside the data facade, that are accessed by methods in the class. 
			All users and activities are created when the first method or varaible is accessed in the class through static blocks.
			Any user and activity register itself to the DataFace upon creation (When the constructor is called).
		</p>
		<p>
			<b>RandomHelper</b> is a class that helps us fill objects with random data. This is used when we need to fill our
			ghost database with many object with preference to automation.
		</p>
		<p>
			<b>User</b> and <b> Activity</b> are classes that exist to hold information about a certain real time object. 
			Any time one of their constructors are called they register themselves into the database. This means that the
			data facade should be the only layer to create data objects.
		</p>
	</div>
	<div>
		<h3>Logic</h3>
		<p>
			The logic layer is accessed through the <b>LogicFacade</b> class. This layer is almost empty and only contains 
			a function to control login information from a user and get all activities for a user. Fill out and change as much
			as you want. Add classes! :)
		</p>
	</div>
	<div>
		<h3>Web</h3>
		<p>
			The web layer is accessed by a user through a web browser that talks with Tomcat. To remove this 
			complication the web layer is therefore separated into two parts; Tomcat Interaction and Page Building.
		</p>
		<div>
			<h4>Tomcat Interaction</h4>
			<p>
				Tomcat interaction consists of our implemented servlets, web.xml (WebContent/WEB-INF/web.xml), 
				static resources, the method <i>answer</i> in the class PageFactory, and the FileServlet class.
				Below in list form their different purposes will be explained;
			</p>
			<ul>
				<li>
					<b>web.xml:</b> helps to construct a URL register from Tomcat. Making it possible to connect 
					a URL to some resource (static or dynamic). This file coordinates collaboration between us 
					and Tomcat.
				</li>
				<li>
					<b>static resources:</b> can be anything from files to images. They do not take into account the
					specific user. They can end with *.jsp, *.css, and *.html. It is configured in the web.xml. If a 
					webpage do only show static information implement it as a static resource (html or jsp).
				</li>
				<li>
					<b>FileServlet:</b> is a class made by BalusC and helps us get static resources from the server. 
					In standard cases Tomcat and the URL register can be funky. To solve this any static resource that
					is not a JSP file should be stored under files (WebContent/files). Remember to futher create folders 
					to make content manageable.
					
				</li>
				<li>
					<b>Serlvets:</b> helps to sort the incoming messages from the client and direct them to a specific page. 
					The first quick part of navigation and fast control checks (E.g. are someone trying to access a login required site?) 
					happens here. These classes can be viewed as links between Tomcat and our actions. The two main methods here are 
					doGet and doPost which should call the <i>answer</i> in the PageFactory class. Here they should include what kind 
					of answer we want. This is done with the <b>EnumPage</b> enumerated type.
				</li>
				<li>
					<b><i>Answer</i> in PageFactory:</b> is the "facade" between TomCat Interaction and Page Building. This method should 
					break up the incoming request into variables and values important for the response page to be generated (E.g. 
					for login we want username and password). It also handles the main navigation. The method calls other methods in the 
					web layer that will construct the web page response.
				</li>
			</ul>
		</div>
		<div>
			<h4>Page Building</h4>
			<p>
				While Tomcat Interaction focuses on navigation and data extraction, Page Building focuses on creating the correct 
				response. <i>Answer</i> in PageFactory calls some method (e.g. login in PageFactory) that will construct a 
				login page with the help of ElementBuilder and LogicFacade. Below the roles will be explained;
			</p>
			<ul>
				<li>
					<b>Some method:</b> concentrates on what page should be created and will take help from the LogicFacade to do so. 
					For example, it will ask the LogicFacade; "Is this correct username for login?". Based on the answer the method will 
					continue with constructing the webpage. To do this, the ElementBuilder will be used. It helps us put together 
					HTML elements without making it to complex and we can put more energy on the looks rather than the code.
				</li>
				<li>
					<b>ElementBuilder:</b> has one task and that is to create HTML elements for presentation of data that you 
					specifiy. This means that the HTML code is abstracted away from the page building. We just say I want a table 
					that have this header and contains this information. The Table class is a good example of such abstraction. 
					The class helps to transform our Java data into a HTML presentation.
				</li>
				<li>
					<b>LogicFacade:</b> has the task to load, save, remove, update, and so on. While the PageFactory and ElementBuilder
					handles the looks, the LogicFacade handles the thinking. It will help to decide if the user is logged in or not.
					It should also help to get and filter data that should be presented.
				</li>
			</ul>
		</div>
	</div>
	<div>
		<br /><br /><br /><br />
	</div>
</div>
</body>
</html>

























